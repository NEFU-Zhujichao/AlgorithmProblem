# Redis面经
### 缓存击穿？缓存穿透？缓存雪崩
- 缓存击穿：假设这样一个场景，一个秒杀系统中的**key**为库存量，如果库存的key突然失效了，所有的请求就都会打到MySQL中，布隆过滤器就没用了因为数据库中都有这些信息，数据库就挡不住大量的请求，容易挂掉。一般都是因为key的失效时间到了或者redis服务器挂了。 
  #### 解决方案：    
    - 不设置key的失效时间。
    - 在事故前：Redis的高可用，主从+哨兵 做redis的集群，防止redis服务器挂掉。
    - 在事故中：可能会换成第三方的缓存，本地Ehcache Hystrix限流和降级 避免MySQL被请求打死。
    - 在事故后：假如redis服务器挂了，需要持久化的rdb+aof 服务器一旦重启将会自动从磁盘上加载数据，快速恢复缓存的数据。
- 缓存穿透：假设这样一个场景，我们数据库中的主键是自增的，然后黑客利用大量肉鸡模拟主键为**负数**的请求，所以这些请求都会使得数据库进行一次查询，大量请求可能会把数据库直接打崩。
  #### 解决方案：
    - set空值：没查到的数据为key 值为null。但是大量的请求会导致redis数据库中存在大量的空值数据。如果说redis内存set满了，redis会进行缓存淘汰策略，导致你redis中老的值或者正在用的值被淘汰掉。一直请求redis，redis服务器的压力也不小。
    - 布隆过滤器：把数据库的部分数据在布隆过滤器中也设置一份。**布隆过滤器能够判断值一定不在里面，但是不能判断值一定在里面**。
### redis
[Redis 复习资料](https://www.cnblogs.com/pengdai/p/14509958.html)